# Архитектура проекта Kyzmet

## Общая структура

Проект построен по модульной архитектуре с разделением ответственности по функциональным блокам. Каждый модуль имеет:

* `controller.js` — обработка HTTP-запросов
* `service.js` — бизнес-логика
* `routes.js` — маршруты API

Пример:

```
src/api/auth/
 ├── auth.controller.js
 ├── auth.routes.js
 └── auth.service.js
```

## Слои архитектуры

1. **Routes** — связывают URL с контроллерами
2. **Controllers** — разбирают запросы, вызывают сервисы
3. **Services** — реализуют логику, обращаются к БД
4. **Database (опционально через DAO или ORM)**

## Инфраструктура

* Docker для изоляции окружения
* База данных инициализируется через SQL скрипт (`init-db/init.sql`)
* Хранение секретов — через `.env`

## Аутентификация

* JWT токены для доступа к защищённым маршрутам
* OTP подтверждение (планируется или реализовано)

## Документирование API

* OpenAPI через `swagger-jsdoc` + `swagger-ui-express`
* Комбинирование спецификаций через `scripts/combine-openapi.js`

## Обработка ошибок

* Централизованный middleware для обработки ошибок

## Будущие улучшения

* Валидация через Joi или Zod
* Слои кэширования (Redis)
* Рефакторинг сервисов в классы для DI

---

Это архитектурное описание подлежит обновлению по мере роста проекта.
